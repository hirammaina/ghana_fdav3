<form role="form" enctype="multipart/form-data" role="form" [formGroup]="productGeneraldetailsfrm">

  <div class="row wizard-content ">
    <div class="col-lg-4">
      <label>Product Type</label>

        <dx-select-box [readOnly]="true" [dataSource]="sectionsData" valueExpr="id" displayExpr="name" placeholder="Select Product Type"  [searchEnabled]="true" formControlName="section_id">
        </dx-select-box>
    </div>

    <div class="col-lg-4">
      <label class="control-label">Device Name</label>
      <dx-text-box formControlName="brand_name" placeholder="Enter Brand Name"  [readOnly]= "isReadOnly"  (onFocusOut) ="onValidateBrandNameDetails($event)" [showClearButton]="true">
      </dx-text-box>
    </div>
    <div class="col-lg-4 ">
      <label for="ti" class="control-label">Medical devices Type</label>

      <dx-select-box [dataSource]="devicesTypeData" valueExpr="id" displayExpr="name" (onValueChanged)="onclassificationDevTypeDataSelect($event)"  [readOnly]= "isReadOnly"  [searchEnabled]="true"
        placeholder="Select Device Type" formControlName="device_type_id">
      </dx-select-box>
    </div>
    <div class="col-lg-4 ">
    
      <label for="ti" class="control-label">Classification</label>
      <dx-select-box [dataSource]="classificationData"  (onValueChanged)="onclassificationDevTypeDataSelect($event)"  valueExpr="id" displayExpr="name"  [readOnly]= "isReadOnly" [searchEnabled]="true"
        placeholder="Select Classification" formControlName="classification_id">
      </dx-select-box>
    </div>
    
      <div class="col-lg-4 input-group" >
        <div class="col-lg-10">
         <label for="ti" class="control-label">Common Name(Optional)</label>

         <dx-select-box [dataSource]="commonNamesData"   [readOnly]= "isReadOnly"  valueExpr="id" displayExpr="name" [searchEnabled]="true"
           placeholder="Select Common name"   formControlName="common_name_id">
         </dx-select-box>
        </div>

         <div class="col-lg-2">
           <dx-button
               text="Add "
               type="success"
               icon="fa fa-plus"
               [elementAttr]="{  class: 'pull-left' }"
               (onClick)="onAddNewCommonNameDetails()">
           </dx-button>
         </div>
       </div>

       


       <div class="col-lg-4 input-group"  *ngIf="classification_id == 84 || classification_id == 85 || classification_id == 86 " >
        <label class="control-label">Size(s)</label>
        <dx-text-box formControlName="sizes" placeholder="Size(s)"  [readOnly]= "isReadOnly" [showClearButton]="true">
        </dx-text-box>
       </div>
       <div class="col-lg-4 input-group"  *ngIf="classification_id == 84 || classification_id == 85 || classification_id == 86 " >
        <label class="control-label">Color(s)</label>
        <dx-text-box formControlName="colors" placeholder="Size(s)"  [readOnly]= "isReadOnly" [showClearButton]="true">
        </dx-text-box>
       </div>




       <div class="col-lg-4">
        <label class="control-label">Product Strength</label>

        <dx-text-box formControlName="product_strength" placeholder="Product Strength"  [readOnly]= "isReadOnly" [showClearButton]="true">
        </dx-text-box>
      </div>
      <div class="col-lg-4">
        <label class="control-label">Product Manufacturing Country</label>

        <dx-select-box [dataSource]="countriesData"  valueExpr="id" displayExpr="name" [searchEnabled]="true"
          placeholder="Product Manufacturing Country" (onValueChanged)="onManufacturingCountryChange($event)" formControlName="manufacturing_country_id">
        </dx-select-box>
    </div>
    <div class="col-lg-4">
        <label class="control-label">Product Origin</label>

        <dx-select-box [dataSource]="productTypeData" valueExpr="id" displayExpr="name" [searchEnabled]="true"   [readOnly]="readOnlyOrigin" 
          placeholder="Product Origin" formControlName="product_origin_id">
        </dx-select-box>
      </div>
    <div class="col-lg-8">
      <label class="control-label">Intended Use</label>
      <dx-text-box formControlName="intended_use" placeholder="Enter Intended Use"  [readOnly]= "isReadOnly" [showClearButton]="true">
      </dx-text-box>
    </div>
    <div class="col-lg-4">
      <label class="control-label">Intended User</label>

      <dx-select-box [dataSource]="intendedEndUserData" valueExpr="id" displayExpr="name"  [readOnly]= "isReadOnly"  [searchEnabled]="true"
        placeholder=" Intended User" formControlName="intended_enduser_id">
      </dx-select-box>
    </div>
    <div class="col-lg-4">
      <label class="control-label">GMDN Code</label>
      <dx-text-box formControlName="gmdn_code" placeholder="Enter GMDN Code"  [showClearButton]="true">
      </dx-text-box>
    <!--
        <dx-select-box [dataSource]="gmdnCodeData" (onSelectionChanged)="ongmdnCodeDataSelect($event)"  valueExpr="id" displayExpr="name"  [readOnly]= "isReadOnly"  [searchEnabled]="true"
        placeholder="GMDN Code" formControlName="gmdn_code">
      </dx-select-box>
    -->
    </div>
    <div class="col-lg-4">
      <label class="control-label">GMDN Term</label>
      <dx-text-box formControlName="gmdn_term" placeholder="Enter GMDN Term"  [showClearButton]="true">
      </dx-text-box>
    </div>
    <div class="col-lg-4">
      <label class="control-label">GMDN Category</label>
      
      <dx-select-box [dataSource]="gmdnCategoryData" valueExpr="id" displayExpr="name" [searchEnabled]="true"  [readOnly]= "isReadOnly" 
      placeholder=" GMDN Category" formControlName="gmdn_category">
    </dx-select-box>
    </div>
    
    <div class="col-lg-4">
          <label class="control-label">Shelf Life(Months) </label>
          <dx-number-box formControlName="shelf_life" placeholder="Shelf Life" [readOnly]= "isReadOnly"  [showClearButton]="true">
          </dx-number-box>
        </div>

        <div class="col-lg-12"  *ngIf="section_id == 7 || section_id == 18">
          <label class="control-label">Target species(vet)</label>
        
        <dx-tag-box
          [items]="targetSpeciesData"
          formControlName="target_species_id"
          placeholder="Target species..."
          valueExpr="id"
          [showSelectionControls]="true"
          applyValueMode="useButtons"
          displayExpr="name">
          
      </dx-tag-box>
    </div>
    <div class="col-lg-12">
      <label class="control-label">Product packaging details & Pack size(s):</label>
      <dx-text-area formControlName="pack_sizes"  placeholder="Pack Sizes">
      </dx-text-area>
    </div>

    <div class="col-lg-12">
      <label class="control-label">Commercial Representation</label>

      <dx-text-area [height]="60" formControlName="physical_description" [readOnly]= "isReadOnly"   placeholder="Commercial Represenation/Pack Size">
      </dx-text-area>
    </div>
    
  <div class="col-lg-8  input-group">
      <div class="col-lg-8">
        <label class="control-label">Local Technical Representative</label>
        <dx-text-box  formControlName="local_agent_name" 
         readOnly=true [showClearButton]="true">

        </dx-text-box>
        <input type="hidden" name="local_agent_id" formControlName="local_agent_id" />
        
        <input type="hidden" name="reg_product_id" value={{reg_product_id}} formControlName="reg_product_id" />
        <input type="hidden" name="prodclass_category_id" formControlName="prodclass_category_id" />
        <input type="hidden" name="shelflifeduration_desc" formControlName="shelflifeduration_desc" />
        <input type="hidden" name="tra_product_id" value={{tra_product_id}} formControlName="tra_product_id" />
     
      </div>
      <div class="col-lg-4">
       
                              <dx-button  [elementAttr]="{ class: 'btn btn-primary pull-left'}" style="margin-top:25px  !important;"  text="Search"  type="default" (onClick)="funcSearchRegistrantDetails(1)">
                                <i class="fa fa-search"></i>Search
                                Local Technical Representative(Licensed Premises)
                            </dx-button>
      </div>
    </div>
   
    <div class="col-lg-4">
        <dx-select-box [dataSource]="zonesData" [hidden]=true valueExpr="id" displayExpr="name" [searchEnabled]="true"
        placeholder="Select Cerificate Issue Place" [readOnly] = true formControlName="zone_id">
      </dx-select-box>
      
      <input type="hidden" name="sub_module_id" formControlName="sub_module_id" />
      <input type="hidden" name="product_id" value={{product_id}} formControlName="product_id" />
    </div>
    </div>
</form>

<!-- Registrant Details -->
<dx-popup class="popup" [width]="funcpopWidth(80)" [height]="500" [showTitle]="true" title="{{trader_title}}"
 [dragEnabled]="false" [closeOnOutsideClick]="true" [(visible)]="isRegistrantDetailsWinshow">
 <div *dxTemplate="let data of 'content'">
 
   
  <dx-data-grid class="table row-border hover"  [height]="450" [wordWrapEnabled]="true"  [remoteOperations]='true'  [dataSource]="traderAccountsDetailsData" keyExpr="id">
    <dxo-filter-row [visible]="false"></dxo-filter-row>
    <dxo-search-panel [visible]="true">
    </dxo-search-panel>
    <dxo-paging [enabled]="true">
    </dxo-paging>
    <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
    </dxo-pager>
    <dxo-export [enabled]="true" fileName="traderFile" [allowExportSelectedData]="true"></dxo-export>

    <dxo-selection mode="single"></dxo-selection>
    <dxo-group-panel [visible]="true"></dxo-group-panel>
    <dxi-column [width]="100" caption="Action" name="command-editing" [allowFiltering]="false" [allowSorting]="false"
      cellTemplate="cellTemplate">
      <div *dxTemplate="let data of 'cellTemplate'">
        <a (click)="funcSelectTraderDetails(data)" class="action-btn"><i class="fa fa-edit"></i>Select</a>&nbsp;
      </div>
    </dxi-column>
    <dxi-column dataField="trader_name" caption="LTR"></dxi-column>
    <dxi-column dataField="country"></dxi-column>
    <dxi-column dataField="physical_address"></dxi-column>
    <dxi-column dataField="email_address"></dxi-column>
    <dxi-column dataField="validity_status"></dxi-column>
      <dxi-column dataField="premise_reg_no"></dxi-column>
      <dxi-column dataField="permit_no"></dxi-column>
  </dx-data-grid>
 </div>
 </dx-popup>
 <dx-popup class="popup"  [width]="funcpopWidth(30)" [height]="450" [showTitle]="true" title="Generic Name Details" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="addproductGenericNamesModal">
  
  <div *dxTemplate="let data of 'content'" >
        <form [formGroup]="addproductGenericNamesFrm" class="col-lg-12  div-nopadding" style="background: #fff;" enctype="multipart/form-data" role="form" (ngSubmit)="onSaveNewGenericName()">
            <div class="col-lg-12">
              <label class="control-label">Generic Name</label>
              <dx-text-box formControlName="name" placeholder="name" [showClearButton]="true">
              </dx-text-box>
            </div>
            <div class="col-lg-12">
              <label class="control-label">Description</label>
              <dx-text-area formControlName="description" placeholder="description" >
              </dx-text-area>
            </div>
           
            <input type='hidden' value='{{section_id}}' formControlName="section_id"/>
            <input type='hidden' value = 'par_common_names' formControlName="tablename"/>

            <div class="col-lg-12">
                <dx-button
                    text="Add Generic Name"
                    type="success"
                    icon="fa fa-plus"
                    [elementAttr]="{  class: 'pull-left' }"
                    (onClick)="onSaveNewGenericName()">
                </dx-button>
              </div>
          </form>
  </div>
</dx-popup>