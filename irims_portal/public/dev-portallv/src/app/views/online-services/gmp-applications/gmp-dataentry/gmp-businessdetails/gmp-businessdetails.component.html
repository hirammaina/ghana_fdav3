<div class="row wizard-content">
<label> GMP inspection/ Quality audit for inspection of sites where the manufacturing process is carried out
in more than one site in the country where the main site is located
</label> 
    <dx-data-grid class="table row-border hover"  [allowColumnResizing]="true"  [columnHidingEnabled]="false" (onToolbarPreparing)="onPremisesBusinesDetailsToolbar($event)"
      [dataSource]="premisesOtherDetailsRows" keyExpr="id">
      <dxo-filter-row [visible]="false"></dxo-filter-row>

      <dxo-paging [enabled]="true">
      </dxo-paging>
      <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
      </dxo-pager>
      <dxo-export [enabled]="true" fileName="dtpremOtherDetailsData" [allowExportSelectedData]="true"></dxo-export>

      <dxo-selection mode="single"></dxo-selection>
      <dxo-group-panel [visible]="true"></dxo-group-panel>
    
    <dxi-column [width]="200" caption="Action" name="command-editing" [allowFiltering]="false" [allowSorting]="false" cellTemplate="cellTemplate">
      <div *dxTemplate="let data of 'cellTemplate'">
          <dx-button text="Edit" (click)="funcEditPremisesDetails(data)" 
              type="danger" icon="edit">
              </dx-button> 
          <dx-button text="Delete" (click)="funcDeletePremisesBusinessDetails(data)" 
              type="danger" icon="delete">
          </dx-button> 
      </div>
  </dxi-column>
      <dxi-column dataField="manufacturing_site_name"></dxi-column>
      <dxi-column dataField="country"></dxi-column>
      <dxi-column dataField="region"></dxi-column>
      <dxi-column dataField="physical_address"></dxi-column>
      <dxi-column dataField="email_address"></dxi-column>
      <dxi-column dataField="business_type" caption="Manufacturing Acitivities"></dxi-column>

    </dx-data-grid>
  </div>

  <!-- modal structure-->
<dx-popup class="popup" [width]="funcpopWidth(80)" [height]="600" [showTitle]="true" title="Manufacturing Site Business Types Information"
[dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="isBusinessTypePopupVisible">
<div *dxTemplate="let data of 'content'">
  <form role="form" class="col-lg-12 row" enctype="multipart/form-data" role="form" [formGroup]="gmpOtherDetailsfrm"
    (ngSubmit)="onSaveGmpOtherDetails()">
    <div class="col-lg-4">
      <label class="control-label">Manufacturing Site Name</label>
      <dx-text-box formControlName="manufacturing_site_name"
        placeholder="Manufacturing Site Name" [showClearButton]="true">
      </dx-text-box>
    </div>
    <div class="col-lg-4">
      <label class="control-label">Country</label>

      <dx-select-box [dataSource]="countries" valueExpr="id"
        displayExpr="name" placeholder="Select Country" (onSelectionChanged)="onCoutryCboSelect($event)"
        [searchEnabled]="true" formControlName="country_id">
      </dx-select-box>

    </div>

    <div class="col-xs-12 col-md-4 col-lg-4 col-xl-4  input-group">
      <div class="col-lg-8">
          <label for="ti" class="control-label">Province/Region/City</label>

          <dx-select-box [dataSource]="regions" valueExpr="id" displayExpr="name" (onSelectionChanged)="onRegionsCboSelect($event)" [searchEnabled]="true" formControlName="region_id">
          </dx-select-box>
      </div>
      <div class="col-lg-4">
          <dx-button
          text="Add Region"
          type="default"
          icon="fa fa-plus" style="margin-top:25px  !important;" 
          [elementAttr]="{  class: 'pull-left' }"
          (onClick)="OnAddNewManufacturerReionDetails()">
      </dx-button>
      </div>

  </div>
 
    <div class="col-lg-4">
      <label for="ti" class="control-label">Email Address</label>
      <dx-text-box  formControlName="email" placeholder="Email Address"
        [showClearButton]="true">
      </dx-text-box>
    </div>
   
    <div class="col-lg-4">
      <label for="ti" class="control-label">Telephone No</label>
      <dx-text-box formControlName="telephone" placeholder="Telephone No" [showClearButton]="true">
      </dx-text-box>
    </div>
 
    <div class="col-lg-12">
      <label class="control-label">Physical Address</label>

      <dx-text-area [height]="60" formControlName="physical_address" placeholder="Physical Address">
      </dx-text-area>
    </div>
    <div class="col-lg-4">
      <label>Manufacturing Operations </label>
      <dx-select-box  [items]="businessTypesData" valueExpr="id"
        displayExpr="name"  placeholder="Select Manufacturing Operations " [searchEnabled]="true" formControlName="business_type_id">
      </dx-select-box>
    </div>

    <div class="col-lg-12">
     
      <input type="hidden" formControlName="id" />
    </div>
    <div class="col-lg-12">
      <dx-button text="Save Other Manufacturing Sites Operations" [disabled]="!gmpOtherDetailsfrm.valid" (onClick)="onSaveGmpOtherDetails()"
        type="success" icon="save" [elementAttr]="{ class: 'btn btn-primary; pull-right' }">
      </dx-button>
    </div>
  </form>
</div>
</dx-popup>
<!--    -->


  
<dx-popup class="popup"  [width]="funcpopWidth(40)" [height]="400" [showTitle]="true" title="Product Type Details" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="addBusinessTypeDetailsMdl">
  
  <div *dxTemplate="let data of 'content'" >
        <form [formGroup]="addBusinessTypeDetailsfrm" class="col-lg-12  div-nopadding" style="background: #fff;" enctype="multipart/form-data" role="form" (ngSubmit)="onSaveNewIngredients()">
            <div class="col-lg-12">
              <label class="control-label">Name</label>
              <dx-text-box formControlName="name" placeholder="name" [showClearButton]="true">
              </dx-text-box>
            </div>
            <div class="col-lg-12">
              <label class="control-label">Description</label>
              <dx-text-area formControlName="description" placeholder="description" >
              </dx-text-area>
            </div>
            <input type='hidden'  formControlName="business_type_id"/>
            <input type='hidden' value = 'par_business_type_details' formControlName="tablename"/>

            <div class="col-lg-12">
                <dx-button
                    text="Add Product Type"
                    type="success"
                    icon="fa fa-plus"
                    [elementAttr]="{  class: 'pull-left' }"
                    (onClick)="onSaveProductTypeDetails()">
                </dx-button>
              </div>
          </form>
  </div>
</dx-popup>



<dx-popup class="popup"  [width]="funcpopWidth(40)" [height]="400" [showTitle]="true" title="Region Name" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="addRegionDetailsWin">
  
  <div *dxTemplate="let data of 'content'" >
        <form [formGroup]="addRegionDetailsFrm" class="col-lg-12  div-nopadding" style="background: #fff;" enctype="multipart/form-data" role="form" (ngSubmit)="onSaveRegiondetails()">
            <div class="col-lg-12">
              <label class="control-label">Region Name</label>
              <dx-text-box formControlName="name" placeholder="name" [showClearButton]="true">
              </dx-text-box>
            </div>
            
            <input type='hidden' formControlName="country_id"/>
            <input type='hidden' value = 'par_regions' formControlName="tablename"/>

            <div class="col-lg-12">
                <dx-button
                    text="Add New Region"
                    type="success"
                    icon="fa fa-plus"
                    [elementAttr]="{  class: 'pull-left' }"
                    (onClick)="onSaveRegiondetails()">
                </dx-button>
              </div>
          </form>
  </div>
</dx-popup>